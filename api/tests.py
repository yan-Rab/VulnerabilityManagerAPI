# Django
from rest_framework.fields import DictField
from api.serializers import HostSerializer
from rest_framework import status
from rest_framework.test import APIClient, APITestCase

# Local
from api.models import Host
# Third party


class HostTests(APITestCase):
    client = APIClient()

    def test_create_host(self):
    
        data = {
            "name": "ServerTeste",
            "ip_address": "192.168.11.1",
            "risk": 8.5,
        }
       
        response = self.client.post('/hosts/', data)
        
        self.assertEqual(response.status_code, status.HTTP_201_CREATED)

    def test_list_hosts(self):
        response = self.client.get('/hosts/')

        hosts = Host.objects.all() 
        serializer = HostSerializer(hosts, many=True)
        self.assertEqual(response.status_code, status.HTTP_200_OK)
        self.assertEqual(response.data['results'], serializer.data)
        
# Create your tests here.
